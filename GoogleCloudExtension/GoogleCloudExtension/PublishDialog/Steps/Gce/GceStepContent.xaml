<UserControl x:Class="GoogleCloudExtension.PublishDialog.Steps.Gce.GceStepContent"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:GoogleCloudExtension.PublishDialog.Steps.Gce"
             xmlns:utils="clr-namespace:GoogleCloudExtension.Utils;assembly=GoogleCloudExtension.Utils"
             xmlns:steps="clr-namespace:GoogleCloudExtension.PublishDialog.Steps"
             xmlns:wpfutils="clr-namespace:GoogleCloudExtension.Utils.Wpf;assembly=GoogleCloudExtension.Utils"
             mc:Ignorable="d" 
             d:DataContext="{d:DesignInstance local:GceStepViewModel}">
    <UserControl.Resources>
        <ResourceDictionary Source="../../../Theming/DefaultStylesResource.xaml" />
    </UserControl.Resources>

    <StackPanel Margin="12">
        <steps:PublishDialogStepHeaderContent/>
        <ContentControl Margin="0,5,0,0"
                        Visibility="{Binding GcpProjectId, Converter={utils:NullEmptyInvisibleConverter}}">
            <ContentControl.Resources>
                <steps:LoadingProjectDataControl x:Key="LoadingProjectDataControl"/>
                <local:GceInputsControl x:Key="InputsControl"/>
                <steps:NeedApiEnabledControl x:Key="NeedApiEnabledControl"/>
                <steps:GeneralErrorControl x:Key="GeneralErrorControl"/>
            </ContentControl.Resources>

            <ContentControl.Style>
                <Style TargetType="ContentControl">
                    <Setter Property="Content" Value="{StaticResource InputsControl}"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding LoadProjectTask.IsPending}" Value="True">
                            <Setter Property="Content" Value="{StaticResource LoadingProjectDataControl}"/>
                        </DataTrigger>

                        <DataTrigger Value="True">
                            <DataTrigger.Binding>
                                <MultiBinding Converter="{wpfutils:BooleanAndConverter}">
                                    <MultiBinding.Bindings>
                                        <Binding Path="LoadProjectTask.IsSuccess"/>
                                        <Binding Path="NeedsApiEnabled"/>
                                    </MultiBinding.Bindings>
                                </MultiBinding>
                            </DataTrigger.Binding>
                            
                            <Setter Property="Content" Value="{StaticResource NeedApiEnabledControl}"/>
                        </DataTrigger>

                        <DataTrigger Value="True">
                            <DataTrigger.Binding>
                                <MultiBinding Converter="{wpfutils:BooleanAndConverter}">
                                    <Binding Path="LoadProjectTask.IsSuccess"/>
                                    <Binding Path="NeedsApiEnabled" Converter="{utils:NotConverter}"/>
                                </MultiBinding>
                            </DataTrigger.Binding>

                            <Setter Property="Content" Value="{StaticResource InputsControl}"/>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding LoadProjectTask.IsError}" Value="True">
                            <Setter Property="Content" Value="{StaticResource GeneralErrorControl}"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ContentControl.Style>
        </ContentControl>
    </StackPanel>
</UserControl>

